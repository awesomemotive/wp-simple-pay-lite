/*! WP Simple Pay Lite for Stripe - 2.0.4
 * https://wpsimplepay.com/
 * Copyright (c) Moonstone Media 2017
 * Licensed GPLv2+ */

var spShared={};!function(a){"use strict";var b;spShared={init:function(){b=a(document.body),b.find(".simpay-currency-format").on("blur.simpayCurrencyFormat",function(b){spShared.formatCurrencyField(a(this))}),b.find(".simpay-amount-input").on("blur.simpayValidateAmount",function(b){spShared.validateAmount(a(this))}),b.find(".simpay-currency-format").trigger("blur.simpayCurrencyFormat"),b.find(".simpay-amount-input").trigger("blur.simpayValidateAmount")},debugLog:function(a,b){"undefined"!=typeof spGeneral&&!0===spGeneral.booleans.scriptDebug&&console.log(a,b)},formatCurrencyField:function(a){a.val(function(b,c){return a.hasClass("simpay-allow-empty")&&!a.val()?"":accounting.formatMoney(accounting.unformat(c,spGeneral.strings.decimalSeparator),"",2,spGeneral.strings.thousandSeparator,spGeneral.strings.decimalSeparator)})},validateAmount:function(a){var b=spShared.unformatCurrency(a.val());if(!b||spGeneral.integers.minAmount>parseFloat(b))return a.val(""),!1;b=b.replace(".",spGeneral.strings.decimalSeparator),-1!==b.indexOf("-")&&(b=b.replace("-","")),a.val(b)},unformatCurrency:function(a){return a=accounting.unformat(a,spGeneral.strings.decimalSeparator).toString(),spGeneral.booleans.isZeroDecimal||(a=parseFloat(a).toFixed(2)),a}},a(document).ready(function(a){spShared.init()})}(jQuery);