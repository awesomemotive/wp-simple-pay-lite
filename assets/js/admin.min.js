/*! WP Simple Pay Pro 3 - 3.6.5-beta-1
 * https://wpsimplepay.com/
 * Copyright (c) Sandhills Development, LLC 2019
 * Licensed GPLv2+ */

!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=22)}({2:function(e,t,n){"use strict";t.a=function(e){if("complete"===document.readyState||"interactive"===document.readyState)return e();document.addEventListener("DOMContentLoaded",e)}},22:function(e,t,n){"use strict";n.r(t);var i=function(e){return"string"!=typeof e||""===e?(console.error("The namespace must be a non-empty string."),!1):!!/^[a-zA-Z][a-zA-Z0-9_.\-\/]*$/.test(e)||(console.error("The namespace can only contain numbers, letters, dashes, periods, underscores and slashes."),!1)};var o=function(e){return"string"!=typeof e||""===e?(console.error("The hook name must be a non-empty string."),!1):/^__/.test(e)?(console.error("The hook name cannot begin with `__`."),!1):!!/^[a-zA-Z][a-zA-Z0-9_.-]*$/.test(e)||(console.error("The hook name can only contain numbers, letters, dashes, periods and underscores."),!1)};var r=function(e){return function(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;if(o(t)&&i(n))if("function"==typeof r)if("number"==typeof a){var s={callback:r,priority:a,namespace:n};if(e[t]){var c,l=e[t].handlers;for(c=l.length;c>0&&!(a>=l[c-1].priority);c--);c===l.length?l[c]=s:l.splice(c,0,s),(e.__current||[]).forEach(function(e){e.name===t&&e.currentIndex>=c&&e.currentIndex++})}else e[t]={handlers:[s],runs:0};"hookAdded"!==t&&m("hookAdded",t,n,r,a)}else console.error("If specified, the hook priority must be a number.");else console.error("The hook callback must be a function.")}};var a=function(e,t){return function(n,r){if(o(n)&&(t||i(r))){if(!e[n])return 0;var a=0;if(t)a=e[n].handlers.length,e[n]={runs:e[n].runs,handlers:[]};else for(var s=e[n].handlers,c=function(t){s[t].namespace===r&&(s.splice(t,1),a++,(e.__current||[]).forEach(function(e){e.name===n&&e.currentIndex>=t&&e.currentIndex--}))},l=s.length-1;l>=0;l--)c(l);return"hookRemoved"!==n&&m("hookRemoved",n,r),a}}};var s=function(e){return function(t){return t in e}};var c=function(e,t){return function(n){e[n]||(e[n]={handlers:[],runs:0}),e[n].runs++;for(var i=e[n].handlers,o=arguments.length,r=new Array(o>1?o-1:0),a=1;a<o;a++)r[a-1]=arguments[a];if(!i||!i.length)return t?r[0]:void 0;var s={name:n,currentIndex:0};for(e.__current.push(s);s.currentIndex<i.length;){var c=i[s.currentIndex].callback.apply(null,r);t&&(r[0]=c),s.currentIndex++}return e.__current.pop(),t?r[0]:void 0}};var l=function(e){return function(){return e.__current&&e.__current.length?e.__current[e.__current.length-1].name:null}};var d=function(e){return function(t){return void 0===t?void 0!==e.__current[0]:!!e.__current[0]&&t===e.__current[0].name}};var u=function(e){return function(t){if(o(t))return e[t]&&e[t].runs?e[t].runs:0}};var p=function(){var e=Object.create(null),t=Object.create(null);return e.__current=[],t.__current=[],{addAction:r(e),addFilter:r(t),removeAction:a(e),removeFilter:a(t),hasAction:s(e),hasFilter:s(t),removeAllActions:a(e,!0),removeAllFilters:a(t,!0),doAction:c(e),applyFilters:c(t,!0),currentAction:l(e),currentFilter:l(t),doingAction:d(e),doingFilter:d(t),didAction:u(e),didFilter:u(t),actions:e,filters:t}},f=p(),m=(f.addAction,f.addFilter,f.removeAction,f.removeFilter,f.hasAction,f.hasFilter,f.removeAllActions,f.removeAllFilters,f.doAction),h=(f.applyFilters,f.currentAction,f.currentFilter,f.doingAction,f.doingFilter,f.didAction,f.didFilter,f.actions,f.filters,n(2));function y(e,t){if(e!==t){var n=document.getElementById("simpay-test-mode-toggle-notice"),i=document.getElementById("simpay-toggle-notice-status"),o=document.getElementById("simpay-toggle-notice-status-link");n.classList.add("notice"),n.classList.add("notice-warning"),n.style.display="block",i&&o&&(i.innerHTML="<strong>"+i.dataset[e]+"</strong>",o.href=o.dataset[e])}}Object(h.a)(function(){var e=document.querySelectorAll('[name="simpay_settings_keys[mode][test_mode]"]'),t=document.querySelector('[name="simpay_settings_keys[mode][test_mode]"]:checked');if(0!==e.length){var n="enabled"===t.value?"test":"live";wpspHooks.doAction("settings.toggleTestMode",n,n),_.each(e,function(e){return e.addEventListener("change",function(e){var t="enabled"===e.target.value?"test":"live";wpspHooks.doAction("settings.toggleTestMode",t,"test"===t?"live":"test")})})}}),Object(h.a)(function(){var e=document.getElementById("simpay-stripe-account-info");e&&wp.ajax.send("simpay_stripe_connect_account_information",{data:{nonce:e.dataset.nonce,account_id:e.dataset.accountId},success:function(t){e.querySelector("p").innerHTML=t.message,e.style.display="block",e.classList.add("notice"),"simpay-stripe-activated-account-actions"===t.actions?e.classList.add("notice-info"):e.classList.add("notice-warning");var n=document.getElementById(t.actions);n&&(n.style.display="block")},error:function(t){e.querySelector("p").innerHTML=t.message,e.style.display="block",e.classList.add("notice"),e.classList.add("notice-error");var n=document.getElementById(t.actions);n&&(n.style.display="block")}})}),window.wpspHooks=p();var v,g,b,k={};v=jQuery,k={init:function(){wpspHooks.addAction("settings.toggleTestMode","wpsp/settings/stripe-connect",y),g=v(document.body),b=g.find("#simpay-form-settings"),this.setupChosen(),this.addMediaFields(),this.handleMetaboxTabClick(),this.stripeConnect(),b.on("click.simpayTabLink",".simpay-tab-link",function(e){e.preventDefault(),k.handleInternalLinkToTabClicks(v(this))}),b.on("click.simpayImagePreview",".simpay-remove-image-preview",function(e){k.handleRemoveImagePreviewClick(e)}),b.find(".simpay-panel-field").on("change.simpaySectionToggle",".simpay-section-toggle",function(e){k.initSectionToggle(v(this))}),g.find(".simpay-button").on("click.simpayShowSpinner",function(e){k.showSpinner(v(this))}),g.find("#simpay-preview-button").on("click.simpayPreviewButton",function(e){k.handlePreviewButton(v(this),e)}),g.find("#post").on("keypress.simpaySubmitOnEnter",function(e){k.handleSubmitOnEnter(v(this),e)}),b.find('.simpay-multi-toggle input[type="radio"]:checked').each(function(){k.initMultiToggle(v(this))}),b.on("change.simpayMultiToggle",'.simpay-multi-toggle input[type="radio"]',function(){k.initMultiToggle(v(this))}),g.find(".simpay-amount-input").trigger("blur.validateAndUpdateAmount"),g.trigger("simpayAdminInit")},handleSubmitOnEnter:function(e,t){var n,i,o;13===(t.keyCode?t.keyCode:t.which)&&(i=(n=e.closest("form")).find("#save-post"),o=n.find("#publish"),i.length>0?i.click():o.click())},handlePreviewButton:function(e,t){var n,i;t.preventDefault(),n=(i=e.closest("form")).attr("action"),i.attr("action",e.data("action")),i.attr("target","_blank"),i.submit(),i.attr("action",n),i.attr("target","")},showSpinner:function(e){e.parent().find(".spinner").css("visibility","visible")},handleRemoveImagePreviewClick:function(e){e.preventDefault(),b.find(".simpay-image-preview-wrap").hide(),b.find("#_image_url").val("")},addMediaFields:function(){var e;v(".simpay-media-uploader").on("click",function(t){t.preventDefault(),window.simpayMediaUploaderInputField=v(this),e?e.open():((e=wp.media.frames.file_frame=wp.media({title:spGeneral.i18n.mediaTitle,button:{text:spGeneral.i18n.mediaButtonText},multiple:!1})).on("select",function(){var t=e.state().get("selection").first().toJSON(),n=window.simpayMediaUploaderInputField.prev(),i="id"===n.data("fvalue")?t.id:t.url;v(".simpay-image-preview-wrap").show(),v(".simpay-image-preview").prop("src",i),n.val(i)}),e.open())})},setupChosen:function(){var e=v(".simpay-chosen-select, .simpay-chosen-search");e.chosen({disable_search_threshold:20}),e.chosen()},handleMetaboxTabClick:function(){var e=v("ul.simpay-tabs a"),t=v("div.simpay-panel"),n=e.parents("li"),i={};e.on("click",function(e){var i=v(this).parent(),o=v(v(this).attr("href"));location.hash=v(this).attr("href"),e.preventDefault(),n.removeClass("active"),i.addClass("active"),t.addClass("simpay-panel-hidden"),o.removeClass("simpay-panel-hidden"),e.stopPropagation()}),location.hash.length&&(setTimeout(function(){window.scrollTo(0,0)},1),(i=v('ul.simpay-tabs a[href="'+location.hash+'"]')).length&&i.click())},stripeConnect:function(){v("#simpay-settings-keys-mode-test-mode").closest(".form-table").prev().hide().prev().hide(),v("#wpsp-api-keys-row-reveal button").click(function(e){e.preventDefault(),v("#simpay-settings-keys-mode-test-mode").closest(".form-table").prev().show().prev().show(),v("#wpsp-api-keys-row-hide").show(),v(this).parent().hide()}),v("#wpsp-api-keys-row-hide button").click(function(e){e.preventDefault(),v("#simpay-settings-keys-mode-test-mode").closest(".form-table").prev().hide().prev().hide(),v("#wpsp-api-keys-row-reveal").show(),v(this).parent().hide()})},handleInternalLinkToTabClicks:function(e){var t=e.data("show-tab");g.find("."+t+"-tab a").click()},initSectionToggle:function(e){var t=e.data("show");e.is(":checked")?e.closest(".simpay-panel-field").parent().find(t).show():e.closest(".simpay-panel-field").parent().find(t).hide()},initMultiToggle:function(e){var t=e.attr("id");e.closest(".simpay-field-radios-inline").find('input[type="radio"]').each(function(e){b.find(".toggle-"+v(this).attr("id")).hide()}),b.find(".toggle-"+t).show()}},v(document).ready(function(e){k.init()})}});
//# sourceMappingURL=admin.min.js.map