!function(e){var t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=331)}({107:function(e,t,n){var a=n(63);e.exports=function(e){if(Array.isArray(e))return a(e)},e.exports.__esModule=!0,e.exports.default=e.exports},108:function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},109:function(e,t,n){var a=n(63);e.exports=function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},110:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},12:function(e,t){e.exports=jQuery},13:function(e,t){var n=/^(?:submit|button|image|reset|file)$/i,a=/^(?:input|select|textarea|keygen)/i,i=/(\[[^\[\]]*\])/g;function r(e,t,n){if(t.match(i))!function e(t,n,a){if(0===n.length)return a;var i=n.shift(),r=i.match(/^\[(.+?)\]$/);if("[]"===i)return t=t||[],Array.isArray(t)?t.push(e(null,n,a)):(t._values=t._values||[],t._values.push(e(null,n,a))),t;if(r){var o=r[1],s=+o;isNaN(s)?(t=t||{})[o]=e(t[o],n,a):(t=t||[])[s]=e(t[s],n,a)}else t[i]=e(t[i],n,a);return t}(e,function(e){var t=[],n=new RegExp(i),a=/^([^\[\]]*)/.exec(e);for(a[1]&&t.push(a[1]);null!==(a=n.exec(e));)t.push(a[1]);return t}(t),n);else{var a=e[t];a?(Array.isArray(a)||(e[t]=[a]),e[t].push(n)):e[t]=n}return e}function o(e,t,n){return n=n.replace(/(\r)?\n/g,"\r\n"),n=(n=encodeURIComponent(n)).replace(/%20/g,"+"),e+(e?"&":"")+encodeURIComponent(t)+"="+n}e.exports=function(e,t){"object"!=typeof t?t={hash:!!t}:void 0===t.hash&&(t.hash=!0);for(var i=t.hash?{}:"",s=t.serializer||(t.hash?r:o),c=e&&e.elements?e.elements:[],l=Object.create(null),u=0;u<c.length;++u){var d=c[u];if((t.disabled||!d.disabled)&&d.name&&a.test(d.nodeName)&&!n.test(d.type)){var p=d.name,m=d.value;if("checkbox"!==d.type&&"radio"!==d.type||d.checked||(m=void 0),t.empty){if("checkbox"!==d.type||d.checked||(m=""),"radio"===d.type&&(l[d.name]||d.checked?d.checked&&(l[d.name]=!0):l[d.name]=!1),null==m&&"radio"==d.type)continue}else if(!m)continue;if("select-multiple"!==d.type)i=s(i,p,m);else{m=[];for(var y=d.options,f=!1,v=0;v<y.length;++v){var h=y[v],g=t.empty&&!h.value,b=h.value||g;h.selected&&b&&(f=!0,i=t.hash&&"[]"!==p.slice(p.length-2)?s(i,p+"[]",h.value):s(i,p,h.value))}!f&&t.empty&&(i=s(i,p,""))}}}if(t.empty)for(var p in l)l[p]||(i=s(i,p,""));return i}},144:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i}));var a=n(7);function i(e,t){var n=document.getElementById("simpay-test-mode-toggle-notice");if(n)if(e!==t){var a=document.getElementById("simpay-toggle-notice-status"),i=document.getElementById("simpay-toggle-notice-status-link");n.style.display="block",a&&i&&(a.innerHTML="<strong>"+a.dataset[e]+"</strong>",i.href=i.dataset[e])}else n.style.display="none"}function r(){var t=document.querySelectorAll(".simpay-disconnect-link");if(t){var n=simpayAdmin.i18n,a=n.disconnectConfirm,i=n.disconnectCancel;t.forEach((function(t){t.addEventListener("click",(function(n){n.preventDefault(),e(".simpay-disconnect-confirm").dialog({resizable:!1,height:"auto",width:400,modal:!0,draggable:!1,open:function(){e(".ui-dialog-buttonset .ui-button").removeClass("ui-button").last().css({marginLeft:"10px"}).focus()},buttons:[{text:i,click:function(){e(this).dialog("close")},class:"button button-secondary"},{text:a,click:function(){window.location.href=t.href},class:"button button-primary"}]})}))}))}}Object(a.a)((function(){var e;(e=document.getElementById("simpay-stripe-account-info"))&&wp.ajax.send("simpay_stripe_connect_account_information",{data:{nonce:e.dataset.nonce},success:function(t){e.querySelector("p").innerHTML=t.message,e.style.display="block","simpay-stripe-activated-account-actions"===t.actions?e.classList.add("notice-info"):e.classList.add("notice-warning");var n=document.getElementById(t.actions);n&&(n.style.display="block"),r()},error:function(t){e.querySelector("p").innerHTML=t.message,e.style.display="block",e.classList.add("notice-error");var n=document.getElementById(t.actions);n&&(n.style.display="block",r())}})}))}).call(this,n(12))},16:function(e,t){function n(t){return e.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},22:function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"c",(function(){return h}));var a=function(e){return"string"!=typeof e||""===e?(console.error("The namespace must be a non-empty string."),!1):!!/^[a-zA-Z][a-zA-Z0-9_.\-\/]*$/.test(e)||(console.error("The namespace can only contain numbers, letters, dashes, periods, underscores and slashes."),!1)},i=function(e){return"string"!=typeof e||""===e?(console.error("The hook name must be a non-empty string."),!1):/^__/.test(e)?(console.error("The hook name cannot begin with `__`."),!1):!!/^[a-zA-Z][a-zA-Z0-9_.-]*$/.test(e)||(console.error("The hook name can only contain numbers, letters, dashes, periods and underscores."),!1)},r=function(e){return function(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;if(i(t)&&a(n))if("function"==typeof r)if("number"==typeof o){var s={callback:r,priority:o,namespace:n};if(e[t]){var c,l=e[t].handlers;for(c=l.length;c>0&&!(o>=l[c-1].priority);c--);c===l.length?l[c]=s:l.splice(c,0,s),(e.__current||[]).forEach((function(e){e.name===t&&e.currentIndex>=c&&e.currentIndex++}))}else e[t]={handlers:[s],runs:0};"hookAdded"!==t&&y("hookAdded",t,n,r,o)}else console.error("If specified, the hook priority must be a number.");else console.error("The hook callback must be a function.")}},o=function(e,t){return function(n,r){if(i(n)&&(t||a(r))){if(!e[n])return 0;var o=0;if(t)o=e[n].handlers.length,e[n]={runs:e[n].runs,handlers:[]};else for(var s=e[n].handlers,c=function(t){s[t].namespace===r&&(s.splice(t,1),o++,(e.__current||[]).forEach((function(e){e.name===n&&e.currentIndex>=t&&e.currentIndex--})))},l=s.length-1;l>=0;l--)c(l);return"hookRemoved"!==n&&y("hookRemoved",n,r),o}}},s=function(e){return function(t,n){return void 0!==n?t in e&&e[t].handlers.some((function(e){return e.namespace===n})):t in e}},c=function(e,t){return function(n){e[n]||(e[n]={handlers:[],runs:0}),e[n].runs++;for(var a=e[n].handlers,i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];if(!a||!a.length)return t?r[0]:void 0;var s={name:n,currentIndex:0};for(e.__current.push(s);s.currentIndex<a.length;){var c=a[s.currentIndex],l=c.callback.apply(null,r);t&&(r[0]=l),s.currentIndex++}return e.__current.pop(),t?r[0]:void 0}},l=function(e){return function(){return e.__current&&e.__current.length?e.__current[e.__current.length-1].name:null}},u=function(e){return function(t){return void 0===t?void 0!==e.__current[0]:!!e.__current[0]&&t===e.__current[0].name}},d=function(e){return function(t){if(i(t))return e[t]&&e[t].runs?e[t].runs:0}},p=function(){var e=Object.create(null),t=Object.create(null);return e.__current=[],t.__current=[],{addAction:r(e),addFilter:r(t),removeAction:o(e),removeFilter:o(t),hasAction:s(e),hasFilter:s(t),removeAllActions:o(e,!0),removeAllFilters:o(t,!0),doAction:c(e),applyFilters:c(t,!0),currentAction:l(e),currentFilter:l(t),doingAction:u(e),doingFilter:u(t),didAction:d(e),didFilter:d(t),actions:e,filters:t}},m=p(),y=(m.addAction,m.addFilter,m.removeAction,m.removeFilter,m.hasAction,m.hasFilter,m.removeAllActions,m.removeAllFilters,m.doAction),f=(m.applyFilters,m.currentAction,m.currentFilter,m.doingAction,m.doingFilter,m.didAction,m.didFilter,m.actions,m.filters,p()),v=f.addAction,h=(f.addFilter,f.doAction);f.applyFilters,t.b=f},331:function(e,t,n){"use strict";n.r(t),function(e){var t=n(22),a=(n(332),n(333),n(144));n(334),n(335),n(338),n(339),window.wpsp=window.wpsp||{hooks:t.b};var i,r,o,s={};s={init:function(){r=i(document.body),o=r.find("#simpay-form-settings"),this.handleMetaboxTabClick(),window.postboxes&&window.postboxes.handle_click&&o.on("click",".postbox .simpay-hndle, .postbox .simpay-handlediv",window.postboxes.handle_click),["_amount_type","_success_redirect_type","_subscription_type","_subscription_custom_amount","_form_display_type",".simpay-total-amount-label-recurring",".simpay-total-amount-label-tax",".simpay-shipping-address",".simpay-text-multiline",".simpay-dropdown-type",".simpay-radio-type",".simpay-price-enable-custom",".simpay-price-type input"].forEach((function(e){var t=i(e),n=!1;"."!==e.substring(0,1)?t='input[name="'.concat(e,'"]'):(t=e,n=!0),i("#simpay-form-settings").on("change",t,(function(){var t=i("#simpay-form-settings");!0===n&&(t=i(this).closest(".simpay-field-data"));var a=i(this).val();i(this).is(":checkbox")&&(a=i(this).is(":checked")?"yes":"no"),t.find(i('.simpay-show-if[data-if="'.concat(e,'"]'))).each((function(){var e=i(this),t=e.data("is");e.hide(),t.includes(a)&&e.show().css("display","block")}))})),i(t).filter(":checked").trigger("change")})),t.b.addAction("settings.toggleTestMode","wpsp/settings/stripe-connect",a.a),o.on("click.simpayTabLink",".simpay-tab-link",(function(e){e.preventDefault(),s.handleInternalLinkToTabClicks(i(this))})),o.on("click.simpayImagePreview",".simpay-remove-image-preview",(function(e){s.handleRemoveImagePreviewClick(e)})),this.setupChosen(),this.addMediaFields(),this.stripeConnect();var e=i(".simpay-payment-modes");e.length&&e.find("input").each((function(){var t=i(this);e.hasClass("simpay-payment-mode--"+t.val())||t.attr("disabled",!0)})),r.trigger("simpayAdminInit")},handleRemoveImagePreviewClick:function(e){e.preventDefault(),o.find(".simpay-image-preview-wrap").hide(),o.find("#_image_url").val("")},addMediaFields:function(){var e;i(".simpay-media-uploader").on("click",(function(t){t.preventDefault(),window.simpayMediaUploaderInputField=i(this),e||(e=wp.media.frames.file_frame=wp.media({title:spGeneral.i18n.mediaTitle,button:{text:spGeneral.i18n.mediaButtonText},multiple:!1})).on("select",(function(){var t=e.state().get("selection").first().toJSON(),n=i("#_image_url"),a="id"===n.data("fvalue")?t.id:t.url;i(".simpay-image-preview-wrap").show(),i(".simpay-image-preview").prop("src",a),n.val(a)})),e.open()}))},setupChosen:function(){var e=i(".simpay-chosen-select, .simpay-chosen-search");e.chosen({disable_search_threshold:20}),e.chosen()},handleMetaboxTabClick:function(){var e=i("ul.simpay-tabs a"),t=i("div.simpay-panel"),n=e.parents("li");e.on("click",(function(e){e.preventDefault();var a=i(this).parent(),r=i(i(this).attr("href")),o=i(this).attr("href");history.pushState(null,null,o),setTimeout((function(){window.scrollTo(0,0)}),1),i('[name="simpay_form_settings_tab"]').val(o),i(".simpay-panels > .spinner").hide(),n.removeClass("active"),a.addClass("active"),t.addClass("simpay-panel-hidden"),r.removeClass("simpay-panel-hidden")}));var a="#form-display-options-settings-panel";location.hash.length&&(a=location.hash);var r=i('ul.simpay-tabs a[href="'+a+'"]');i('[name="simpay_form_settings_tab"]').val(a),r.length&&r.click()},stripeConnect:function(){var e="tr:nth-child(2), tr:nth-child(3), tr:nth-child(4), tr:nth-child(5)";i(".simpay-settings.stripe-account .form-table").find(e).hide(),i("#wpsp-api-keys-row-reveal button").on("click",(function(t){t.preventDefault(),i(".simpay-settings.stripe-account .form-table").find(e).show(),i("#wpsp-api-keys-row-hide").show(),i(this).parent().hide(),i(".wpsp-manual-key-warning").show()})),i("#wpsp-api-keys-row-hide button").on("click",(function(t){t.preventDefault(),i(".simpay-settings.stripe-account .form-table").find(e).hide(),i("#wpsp-api-keys-row-reveal").show(),i(this).parent().hide(),i(".wpsp-manual-key-warning").hide()}))},handleInternalLinkToTabClicks:function(e){var t=e.data("show-tab");r.find("."+t+"-tab a").click()}},(i=e)(document).ready((function(e){s.init()}))}.call(this,n(12))},332:function(e,t,n){"use strict";var a=n(7),i=simpayAdminSettingToggles||[];function r(e){var t=e.id,n=(e.value,e.toggles,document.querySelector(".simpay-settings-".concat(t)));if(!n)return{};var a=n.querySelector("input");a||(a=n.querySelector("select"));var i=a.value;return"checkbox"===a.type&&(i=!0===a.checked?"yes":"no"),{setting:a,currentValue:i}}function o(e){var t=e.id,n=e.value,a=e.toggles,s=r(e),c=(s.setting,s.currentValue);"none"!==document.querySelector(".simpay-settings-".concat(t)).style.display&&(a.map((function(e){return document.querySelector(".simpay-settings-".concat(e))})).forEach((function(e){e&&(e.style.display=c===n?"table-row":"none")})),a.forEach((function(e){var t=_.find(i,{id:e});t&&o(t)})))}Object(a.a)((function(){i.forEach((function(e){o(e),r(e).setting.addEventListener("change",(function(){return o(e)}))}))}))},333:function(e,t,n){"use strict";var a=n(7);Object(a.a)((function(){var e=window.wpsp.hooks,t=document.querySelectorAll('[name="simpay_settings[test_mode]"]');if(0!==t.length){var n="enabled"===document.querySelector('[name="simpay_settings[test_mode]"]:checked').value?"test":"live";e.doAction("settings.toggleTestMode",n,n),_.each(t,(function(t){return t.addEventListener("change",(function(t){var a="enabled"===t.target.value?"test":"live";e.doAction("settings.toggleTestMode",a,n)}))}))}}))},334:function(e,t,n){"use strict";var a=n(7);Object(a.a)((function(){var e=document.querySelector(".simpay-recaptcha-feedback");if(e){var t=simpayGoogleRecaptcha,n=t.siteKey,a=t.i18n;""!==n&&grecaptcha.ready((function(){var e=document.querySelector(".grecaptcha-badge");e&&(e.style.display="none");try{grecaptcha.execute(n,{action:"simple_pay_admin_test"}).then((function(e){wp.ajax.send("simpay_validate_recaptcha_source",{data:{token:e,recaptcha_action:"simple_pay_admin_test"},error:i})})).catch(i)}catch(e){i()}}))}function i(){e.style.display="block",e.classList.add("notice-error"),e.querySelector("p").innerText=a.invalid}}))},335:function(e,t,n){"use strict";n(336),n(337)},336:function(e,t,n){"use strict";(function(e){var t=n(13),a=n.n(t),i=n(7);Object(i.a)((function(){var t,n=document.querySelector(".post-type-simple-pay #post");if(n){var i=a()(n,{hash:!0});delete i.simpay_form_settings_tab,function(t){function n(e){var n=a()(document.querySelector(".post-type-simple-pay form#post"),{hash:!0});if(delete n.simpay_form_settings_tab,JSON.stringify(n)!==t)return e.preventDefault(),simpayAdmin.i18n.leavePageConfirm}window.addEventListener("beforeunload",n),window.onbeforeunload=n,e(".post-type-simple-pay form#post").off("submit").on("submit",(function(){window.removeEventListener("beforeunload",n),window.onbeforeunload=null}))}(JSON.stringify(i)),function(){var e=document.querySelector(".simpay-recaptcha-payment-form-feedback");if(e){var t=document.querySelector(".simpay-recaptcha-payment-form-description"),n=simpayGoogleRecaptcha,a=n.siteKey,i=n.i18n;if(t.style.display="none",""===a)return r();grecaptcha.ready((function(){var e=document.querySelector(".grecaptcha-badge");e&&(e.style.display="none");try{grecaptcha.execute(a,{action:"simple_pay_admin_test"}).then((function(e){wp.ajax.send("simpay_validate_recaptcha_source",{data:{token:e,recaptcha_action:"simple_pay_admin_test"},success:o,error:r})})).catch(r)}catch(e){r()}}))}function r(){e.style.color="#b32d2e",e.style.display="inline",e.innerHTML=i.disabled,t.style.display="inline-block"}function o(){e.style.color="green",e.style.display="inline",e.innerHTML=i.enabled,t.style.display="inline-block"}}(),(t=document.querySelector("#_company_name"))&&(t.addEventListener("blur",(function(){0===t.value.length?(t.nextElementSibling.classList.remove("hidden"),t.value=simpayAdmin.siteTitle):t.nextElementSibling.classList.add("hidden")})),t.addEventListener("focus",(function(){0!==t.value.length&&t.nextElementSibling.classList.add("hidden")})))}}))}).call(this,n(12))},337:function(e,t,n){"use strict";(function(e,t){var a=n(56),i=n.n(a),r=n(7);function o(e){var t=e.querySelector(".simpay-price-label-display"),n=e.querySelector(".simpay-price-label"),a=spGeneral.strings,i=a.recurringIntervalDisplay,r=a.customAmountLabel;if(""!==n.value)t.innerHTML=n.value;else{var o,s=e.querySelector(".simpay-price-currency"),c=e.querySelector(".simpay-price-amount"),l=e.querySelector(".simpay-price-amount-type"),u=e.querySelector(".simpay-price-custom-amount input"),d=e.querySelector(".simpay-price-enable-custom-amount"),p=spGeneral.strings,m=p.currencyPosition,y=p.recurringIntervals,f=s.options[s.selectedIndex].dataset.symbol;switch(o=!0===d.checked?u.value:c.value,m){case"left":o="".concat(f).concat(o);break;case"left_space":o="".concat(f," ").concat(o);break;case"right":o="".concat(o).concat(f);break;case"right_space":o="".concat(o," ").concat(f)}if(!0===d.checked&&(o=r.replace("%s",o)),"recurring"===l.value){var v=e.querySelector(".simpay-price-recurring-interval"),h=e.querySelector(".simpay-price-recurring-interval-count"),g=y[v.options[v.selectedIndex].value];o=i.replace("%1$s",o).replace("%2$s",h.value).replace("%3$s","1"===h.value?g[0]:g[1])}t.innerHTML=o}}function s(e,t){e.querySelector(".simpay-price-recurring-settings").style.display=t.checked?"block":"none"}function c(e){var t=e.querySelector(".simpay-price-recurring-interval"),n=e.querySelector(".simpay-price-recurring-interval-count"),a=parseInt(n.value),r=t.options[t.selectedIndex].value,o=JSON.parse(t.dataset.intervals);switch(i()(t.options).forEach((function(e,n){var i=e.value;t.options[n].text=1===a?o[i][0]:o[i][1]})),r){case"day":a>1825&&(n.value=1825);break;case"week":a>260&&(n.value=260);break;case"month":a>60&&(n.value=60);break;case"year":a>5&&(n.value=5)}}function l(){var e=document.querySelectorAll(".simpay-price");_.each(e,(function(e){var t=e.querySelector(".simpay-price-amount-type").value;e.querySelector(".simpay-price-label").addEventListener("keyup",(function(){return o(e)})),o(e),e.querySelector(".simpay-price-currency").addEventListener("change",(function(){!function(e){var t=e.querySelector(".simpay-price-currency"),n=t.options[t.selectedIndex].dataset.symbol,a=e.querySelectorAll(".simpay-price-currency-symbol");_.each(a,(function(e){return e.innerText=n}))}(e),o(e)}));var n=e.querySelectorAll(".simpay-price-amount-type .button");n.length>0&&_.each(n,(function(t){return t.addEventListener("click",(function(t){t.preventDefault(),function(e,t){var n=e.querySelectorAll(".simpay-price-amount-type .button");_.each(n,(function(e){return e.classList.remove("button-primary")}));var a=t.dataset.amountType,i=e.querySelector(".simpay-price-recurring-settings");t.classList.add("button-primary"),i.style.display="recurring"===a?"block":"none";var r=e.querySelector(".simpay-price-recurring-amount-toggle"),o=e.querySelector(".simpay-price-enable-optional-subscription");r.style.display="recurring"===a?"none":"block",o.checked=!1,e.querySelector(".simpay-price-amount-type").value=a}(e,t.target),o(e)}))})),e.querySelector(".simpay-price-amount").addEventListener("keyup",(function(){return o(e)}));var a=e.querySelector(".simpay-price-enable-optional-subscription");a&&(a.addEventListener("click",(function(t){var n=t.target;s(e,n),o(e)})),"recurring"!==t&&s(e,a)),e.querySelector(".simpay-price-enable-custom-amount").addEventListener("click",(function(){!function(e){var t=e.querySelector(".simpay-price-custom-amount");t.style.display="none"===t.style.display?"block":"none"}(e),o(e)})),e.querySelector(".simpay-price-recurring-interval").addEventListener("change",(function(){o(e),c(e)}));var i=e.querySelector(".simpay-price-recurring-interval-count");i.addEventListener("keyup",(function(){c(e),o(e)})),i.addEventListener("change",(function(){c(e),o(e)}));var r=e.querySelector(".simpay-price-legacy-setting-toggle");r&&r.addEventListener("click",(function(t){t.preventDefault(),function(e){var t=e.querySelectorAll(".simpay-price-legacy-setting");_.each(t,(function(e){return e.style.display="block"===e.style.display?"none":"block"}))}(e)})),e.querySelector(".simpay-price-default").addEventListener("change",(function(){return function(e){var t=document.querySelectorAll(".simpay-price-default");_.each(t,(function(e){return e.checked=!1})),e.querySelector(".simpay-price-default").checked=!0}(e)})),e.querySelector(".simpay-price-remove").addEventListener("click",(function(t){t.preventDefault(),function(e){e.remove(),u()}(e)}))}))}function u(){var e=document.querySelectorAll(".simpay-price");document.querySelector(".simpay-price-default:checked")||(e[0].querySelector(".simpay-price-default").checked=!0)}Object(r.a)((function(){var n,a,i;t(".simpay-prices").sortable({items:".simpay-field-metabox",containment:"#simpay-prices",handle:".simpay-hndle",placeholder:"sortable-placeholder",cursor:"move",delay:t(document.body).hasClass("mobile")?200:0,distance:2,tolerance:"pointer",forcePlaceholderSize:!0,opacity:.65,helper:function(e,t){return t.clone().find(":input").attr("name",(function(e,t){return"sort_"+parseInt(1e5*Math.random(),10).toString()+"_"+t})).end()}}),l(),n=document.getElementById("simpay-prices-advanced-toggle"),a=document.getElementById("simpay-prices-advanced"),n&&a&&n.addEventListener("click",(function(e){e.preventDefault(),a.style.display="block"==a.style.display?"none":"block"})),(i=document.getElementById("simpay-prices-advanced-add"))&&i.addEventListener("click",(function(t){var n,a,r,o,s,c;t.preventDefault(),r=(a=(n=i).dataset).nonce,o=a.formId,s=document.getElementById("simpay-prices"),c=document.getElementById("simpay-prices-advanced-plan-id"),n.classList.add("disabled"),wp.ajax.send("simpay_add_plan",{data:{_wpnonce:r,form_id:o,plan_id:c.value},success:function(t){e(s).append(t),l(),document.getElementById("simpay-prices-advanced").style.display="none",c.value="",n.classList.remove("disabled")},error:function(e){var t=e.message;alert(t),n.classList.remove("disabled")}})})),function(){var t=document.getElementById("simpay-add-price");t&&t.addEventListener("click",(function(n){var a,i,r,o,s;n.preventDefault(),r=(i=(a=t).dataset).nonce,o=i.formId,s=document.getElementById("simpay-prices"),a.classList.add("disabled"),wp.ajax.send("simpay_add_price",{data:{_wpnonce:r,form_id:o},success:function(t){e(s).append(t),l(),u(),a.classList.remove("disabled")},error:function(e){var t=e.message;alert(t),a.classList.remove("disabled")}})}))}()}))}).call(this,n(12),n(12))},338:function(e,t,n){"use strict";(function(e){var t=n(16),a=n.n(t),i=n(7),r='<i class="fa fa-toggle-on fa-flip-horizontal" aria-hidden="true"></i>',o='<i class="fa fa-toggle-on" aria-hidden="true"></i>',s=simpayAdmin,c=s.nonce,l=s.ajaxUrl,u=s.i18n,d=u.addonActivated,p=u.addonActivate,m=u.addonActive,y=u.addonDeactivate,f=u.addonInactive,v=u.addonInstall,h=u.addonError,g=u.pluginError;function b(t){t.preventDefault();var n,i,s,u,b,_,k=e(t.target);if(k.hasClass("status-go-to-url"))window.open(k.attr("data-plugin"),"_blank");else{var S=k.attr("data-type");if(k.prop("disabled",!0).addClass("loading"),k.html('<i class="fa fa-spinner fa-spin" aria-hidden="true"></i>'),k.hasClass("status-active"))n="deactivate",i="status-installed","plugin"===S&&(i+=" button button-secondary"),s=f,u=p,b=y,"addon"===S&&(u=r+u,b=o+b);else if(k.hasClass("status-installed"))n="activate",i="status-active","plugin"===S&&(i+=" button button-secondary disabled"),s=m,u=y,"addon"===S?(u=o+u,b=r+p):"plugin"===S&&(u=d,b=p);else{if(!k.hasClass("status-missing"))return;n="install",i="status-active","plugin"===S&&(i+=" button disabled"),s=m,u=d,b='<i class="fa fa-cloud-download" aria-hidden="true"></i>',"addon"===S&&(u=r+y,b+=v)}var x=k.closest(".simpay-addon");!function(t,n,a,i){var r={activate:"simpay_activate_addon",install:"simpay_install_addon",deactivate:"simpay_deactivate_addon"}[n];if(r){var o={action:r,nonce:c,plugin:t,type:a};e.post(l,o,i).fail((function(e){console.log(e.responseText)}))}}(k.attr("data-plugin"),n,S,(function(e){e.success?("install"===n?(k.attr("data-plugin",e.data.basename),_=e.data.msg,e.data.is_activated||(s=f,u="plugin"===S?p:r+p,i="plugin"===S?"status-installed button button-secondary":"status-installed")):_=e.data,x.find(".simpay-addon__actions").append('<div class="msg success">'+_+"</div>"),x.find("span.status-label").removeClass("status-active status-installed status-missing").addClass(i).removeClass("button button-primary button-secondary disabled").text(s),k.removeClass("status-active status-installed status-missing").removeClass("button button-primary button-secondary disabled").addClass(i).html(u)):("object"===a()(e.data)?"addon"===S?x.find(".simpay-addon__actions").append('<div class="msg error">'+h+"</div>"):x.find(".simpay-addon__actions").append('<div class="msg error">'+g+"</div>"):x.find(".simpay-addon__actions").append('<div class="msg error">'+e.data+"</div>"),"install"===n&&"plugin"===S&&k.addClass("status-go-to-url").removeClass("status-missing"),k.html(b)),k.prop("disabled",!1).removeClass("loading"),setTimeout((function(){x.find(".msg").remove()}),3e3)}))}}Object(i.a)((function(){document.querySelector(".simpay-addons")&&document.querySelectorAll(".simpay-addon").forEach((function(e){e.querySelector("button").addEventListener("click",b)}))}))}).call(this,n(12))},339:function(e,t,n){"use strict";var a=n(7);Object(a.a)((function(){var e=new ClipboardJS(".simpay-copy-button");e.on("success",(function(t){var n=t.trigger,a=n.dataset.copied,i=n.innerHTML;clearTimeout(r),n.innerHTML=a,n.classList.contains("button-secondary")&&(n.style.color="green",n.style.borderColor="green"),t.clearSelection();var r=setTimeout((function(){n.innerHTML=i,n.classList.contains("button-secondary")&&(n.style.color="",n.style.borderColor=""),e.clipboardAction.fakeElem&&e.clipboardAction.removeFake&&e.clipboardAction.removeFake()}),3e3);wp.a11y.speak(a)}))}))},56:function(e,t,n){var a=n(107),i=n(108),r=n(109),o=n(110);e.exports=function(e){return a(e)||i(e)||r(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},63:function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a},e.exports.__esModule=!0,e.exports.default=e.exports},7:function(e,t,n){"use strict";function a(e){"complete"!==document.readyState&&"interactive"!==document.readyState?document.addEventListener("DOMContentLoaded",e):e()}n.d(t,"a",(function(){return a}))}});