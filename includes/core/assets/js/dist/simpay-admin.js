!function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=17)}([function(e,t,n){"use strict";function a(e){"complete"!==document.readyState&&"interactive"!==document.readyState?document.addEventListener("DOMContentLoaded",e):e()}n.d(t,"a",(function(){return a}))},function(e,t,n){"use strict";var a=n(13);n.o(a,"maybeBlockButtonWithUpgradeModal")&&n.d(t,"maybeBlockButtonWithUpgradeModal",(function(){return a.maybeBlockButtonWithUpgradeModal})),n.o(a,"maybeBlockCheckboxWithUpgradeModal")&&n.d(t,"maybeBlockCheckboxWithUpgradeModal",(function(){return a.maybeBlockCheckboxWithUpgradeModal})),n.o(a,"maybeBlockSelectWithUpgradeModal")&&n.d(t,"maybeBlockSelectWithUpgradeModal",(function(){return a.maybeBlockSelectWithUpgradeModal})),n.o(a,"upgradeModal")&&n.d(t,"upgradeModal",(function(){return a.upgradeModal})),n(15);var r=n(14);n.d(t,"maybeBlockButtonWithUpgradeModal",(function(){return r.a})),n.d(t,"maybeBlockCheckboxWithUpgradeModal",(function(){return r.b})),n.d(t,"maybeBlockSelectWithUpgradeModal",(function(){return r.c})),n.d(t,"upgradeModal",(function(){return r.d}))},function(e,t){e.exports=jQuery},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return c}));var a=n(11),r=n.n(a),i=n(8),o=n.n(i);function c(_x,e){return s.apply(this,arguments)}function s(){return(s=r()(o.a.mark((function t(n,a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.ajax({data:a,method:"POST",url:"".concat(wpApiSettings.root,"wpsp/").concat(n),beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",wpApiSettings.nonce)}});case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),t.t0.responseJSON;case 10:case"end":return t.stop()}}),t,null,[[0,6]])})))).apply(this,arguments)}}).call(this,n(2))},function(e,t,n){var a=n(28);e.exports=function(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var a=n(18),r=n(19),i=n(20),o=n(21);e.exports=function(e){return a(e)||r(e)||i(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){var n=/^(?:submit|button|image|reset|file)$/i,a=/^(?:input|select|textarea|keygen)/i,r=/(\[[^\[\]]*\])/g;function i(e,t,n){if(t.match(r))!function e(t,n,a){if(0===n.length)return a;var r=n.shift(),i=r.match(/^\[(.+?)\]$/);if("[]"===r)return t=t||[],Array.isArray(t)?t.push(e(null,n,a)):(t._values=t._values||[],t._values.push(e(null,n,a))),t;if(i){var o=i[1],c=+o;isNaN(c)?(t=t||{})[o]=e(t[o],n,a):(t=t||[])[c]=e(t[c],n,a)}else t[r]=e(t[r],n,a);return t}(e,function(e){var t=[],n=new RegExp(r),a=/^([^\[\]]*)/.exec(e);for(a[1]&&t.push(a[1]);null!==(a=n.exec(e));)t.push(a[1]);return t}(t),n);else{var a=e[t];a?(Array.isArray(a)||(e[t]=[a]),e[t].push(n)):e[t]=n}return e}function o(e,t,n){return n=n.replace(/(\r)?\n/g,"\r\n"),n=(n=encodeURIComponent(n)).replace(/%20/g,"+"),e+(e?"&":"")+encodeURIComponent(t)+"="+n}e.exports=function(e,t){"object"!=typeof t?t={hash:!!t}:void 0===t.hash&&(t.hash=!0);for(var r=t.hash?{}:"",c=t.serializer||(t.hash?i:o),s=e&&e.elements?e.elements:[],l=Object.create(null),u=0;u<s.length;++u){var d=s[u];if((t.disabled||!d.disabled)&&d.name&&a.test(d.nodeName)&&!n.test(d.type)){var p=d.name,m=d.value;if("checkbox"!==d.type&&"radio"!==d.type||d.checked||(m=void 0),t.empty){if("checkbox"!==d.type||d.checked||(m=""),"radio"===d.type&&(l[d.name]||d.checked?d.checked&&(l[d.name]=!0):l[d.name]=!1),null==m&&"radio"==d.type)continue}else if(!m)continue;if("select-multiple"!==d.type)r=c(r,p,m);else{m=[];for(var y=d.options,f=!1,h=0;h<y.length;++h){var v=y[h],g=t.empty&&!v.value,b=v.value||g;v.selected&&b&&(f=!0,r=t.hash&&"[]"!==p.slice(p.length-2)?c(r,p+"[]",v.value):c(r,p,v.value))}!f&&t.empty&&(r=c(r,p,""))}}}if(t.empty)for(var p in l)l[p]||(r=c(r,p,""));return r}},function(e,t,n){"use strict";n.d(t,"b",(function(){return h}));var a=function(e){return"string"!=typeof e||""===e?(console.error("The namespace must be a non-empty string."),!1):!!/^[a-zA-Z][a-zA-Z0-9_.\-\/]*$/.test(e)||(console.error("The namespace can only contain numbers, letters, dashes, periods, underscores and slashes."),!1)},r=function(e){return"string"!=typeof e||""===e?(console.error("The hook name must be a non-empty string."),!1):/^__/.test(e)?(console.error("The hook name cannot begin with `__`."),!1):!!/^[a-zA-Z][a-zA-Z0-9_.-]*$/.test(e)||(console.error("The hook name can only contain numbers, letters, dashes, periods and underscores."),!1)},i=function(e){return function(t,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;if(r(t)&&a(n))if("function"==typeof i)if("number"==typeof o){var c={callback:i,priority:o,namespace:n};if(e[t]){var s,l=e[t].handlers;for(s=l.length;s>0&&!(o>=l[s-1].priority);s--);s===l.length?l[s]=c:l.splice(s,0,c),(e.__current||[]).forEach((function(e){e.name===t&&e.currentIndex>=s&&e.currentIndex++}))}else e[t]={handlers:[c],runs:0};"hookAdded"!==t&&y("hookAdded",t,n,i,o)}else console.error("If specified, the hook priority must be a number.");else console.error("The hook callback must be a function.")}},o=function(e,t){return function(n,i){if(r(n)&&(t||a(i))){if(!e[n])return 0;var o=0;if(t)o=e[n].handlers.length,e[n]={runs:e[n].runs,handlers:[]};else for(var c=e[n].handlers,s=function(t){c[t].namespace===i&&(c.splice(t,1),o++,(e.__current||[]).forEach((function(e){e.name===n&&e.currentIndex>=t&&e.currentIndex--})))},l=c.length-1;l>=0;l--)s(l);return"hookRemoved"!==n&&y("hookRemoved",n,i),o}}},c=function(e){return function(t,n){return void 0!==n?t in e&&e[t].handlers.some((function(e){return e.namespace===n})):t in e}},s=function(e,t){return function(n){e[n]||(e[n]={handlers:[],runs:0}),e[n].runs++;for(var a=e[n].handlers,r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];if(!a||!a.length)return t?i[0]:void 0;var c={name:n,currentIndex:0};for(e.__current.push(c);c.currentIndex<a.length;){var s=a[c.currentIndex],l=s.callback.apply(null,i);t&&(i[0]=l),c.currentIndex++}return e.__current.pop(),t?i[0]:void 0}},l=function(e){return function(){return e.__current&&e.__current.length?e.__current[e.__current.length-1].name:null}},u=function(e){return function(t){return void 0===t?void 0!==e.__current[0]:!!e.__current[0]&&t===e.__current[0].name}},d=function(e){return function(t){if(r(t))return e[t]&&e[t].runs?e[t].runs:0}},p=function(){var e=Object.create(null),t=Object.create(null);return e.__current=[],t.__current=[],{addAction:i(e),addFilter:i(t),removeAction:o(e),removeFilter:o(t),hasAction:c(e),hasFilter:c(t),removeAllActions:o(e,!0),removeAllFilters:o(t,!0),doAction:s(e),applyFilters:s(t,!0),currentAction:l(e),currentFilter:l(t),doingAction:u(e),doingFilter:u(t),didAction:d(e),didFilter:d(t),actions:e,filters:t}},m=p(),y=(m.addAction,m.addFilter,m.removeAction,m.removeFilter,m.hasAction,m.hasFilter,m.removeAllActions,m.removeAllFilters,m.doAction),f=(m.applyFilters,m.currentAction,m.currentFilter,m.doingAction,m.doingFilter,m.didAction,m.didFilter,m.actions,m.filters,p()),h=(f.addAction,f.addFilter,f.doAction);f.applyFilters,t.a=f},function(e,t,n){var a=n(27)();e.exports=a;try{regeneratorRuntime=a}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=a:Function("r","regeneratorRuntime = r")(a)}},function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l}));var a=n(5),r=n.n(a),i=n(0),o=n(1);function c(e,t){var n=document.getElementById("_allow_purchasing_multiple_line_items"),a=e.querySelector(".simpay-price-enable-optional-subscription"),r=e.querySelector(".simpay-price-recurring-toggle-label");r&&a&&(r.style.display=a&&a.checked&&n.checked?"block":"none",a.addEventListener("change",(function(e){r.style.display=e.target.checked&&n.checked?"block":"none"})))}function s(){var e=document.getElementById("_allow_purchasing_multiple_line_items");if(e){e.getAttribute("data-upgrade-title")&&e.addEventListener("click",(function(t){t.preventDefault(),Object(o.maybeBlockCheckboxWithUpgradeModal)(t,e)}));var t=function(){var t=document.querySelectorAll(".simpay-quantity-toggle");t&&t.forEach((function(t){e.checked?t.classList.remove("hidden"):t.classList.add("hidden")}));var n=document.querySelector(".simpay-price-select-display-type");n&&(e.checked?n.style.display="none":n.style.display="block")},n=function(){var t=document.querySelectorAll(".simpay-price-required-check");t&&t.forEach((function(t){e.checked?t.style.display="block":t.style.display="none"}))};e.addEventListener("change",(function(r){t(),n(),a(r.target.checked),l(e)})),t(),n(),a(),l(e)}function a(e){document.querySelectorAll(".simpay-price").forEach((function(e){c(e)}))}}function l(e){var t=document.querySelectorAll(".simpay-panel-field-payment-method-filter"),n=document.querySelectorAll(".simpay-panel-field-payment-method[data-payment-method]");r()(n).forEach((function(n){var a=JSON.parse(n.dataset.paymentMethod),r=a.recurring,i=a.scope;if(e.checked)n.style.display=r?"block":"none";else{var o="popular"===i?"block":"none";n.style.display="all"===t[0].value?"block":o}}))}Object(i.a)((function(){s()}))},function(e,t){function n(t){return e.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function n(e,t,n,a,r,i,o){try{var c=e[i](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(a,r)}e.exports=function(e){return function(){var t=this,a=arguments;return new Promise((function(r,i){var o=e.apply(t,a);function c(e){n(o,r,i,c,s,"next",e)}function s(e){n(o,r,i,c,s,"throw",e)}c(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){Number.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},Number.isSafeInteger=Number.isSafeInteger||function(e){return Number.isInteger(e)&&Math.abs(e)<=Number.MAX_SAFE_INTEGER},Number.MAX_SAFE_INTEGER||(Number.MAX_SAFE_INTEGER=9007199254740991)},function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return u}));var a=n(4),r=n.n(a);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e){var t=e.target,n=t.dataset,a=n.available,r=n.upgradeTitle,i=n.upgradeDescription,o=n.upgradeUrl,c=n.upgradePurchasedUrl;if(a&&"yes"!==a)return e.preventDefault(),e.stopImmediatePropagation(),u({title:r,description:i,url:o,purchasedUrl:c},{close:function(){if("radio"===t.type){var n=t.dataset.prevValue,a=document.querySelector('input[name="'.concat(e.target.name,'"][value="').concat(n,'"]'));if(a){a.checked=!0;var r=document.createEvent("HTMLEvents");r.initEvent("change",!0,!0),a.dispatchEvent(r),a.focus()}}t.checked=!1}}),!1}function s(e){var t=e.currentTarget.dataset,n=t.available,a=t.upgradeTitle,r=t.upgradeDescription,i=t.upgradeUrl,o=t.upgradePurchasedUrl;return!(!n||"yes"===n||(e.preventDefault(),u({title:a,description:r,url:i,purchasedUrl:o}),0))}function l(e){var t=e.target,n=t.options[t.selectedIndex].dataset,a=n.available,r=n.upgradeTitle,i=n.upgradeDescription,o=n.upgradeUrl,c=n.upgradePurchasedUrl,s=n.prevValue;a&&"yes"!==a&&(e.preventDefault(),u({title:r,description:i,url:o,purchasedUrl:c}),t.value=s)}function u(t){var n=t.title,a=t.description,r=t.url,i=t.purchasedUrl,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e(".simpay-upgrade-modal").dialog(o({position:{my:"center",at:"center",of:window},modal:!0,width:600,resizable:!1,draggable:!1,open:function(){var t=e(this);t.parent().find(".ui-dialog-titlebar").css({borderBottom:0}),t.find(".simpay-upgrade-modal__title").html(n),t.find(".simpay-upgrade-modal__description").html(a),t.find(".simpay-upgrade-modal__upgrade-url").attr("href",r),t.find(".simpay-upgrade-modal__upgrade-purchased-url").attr("href",i)}},c))}}).call(this,n(2))},function(e,t,n){"use strict";n(3),n(4),n(6),n(11),n(8)},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return r}));var a=n(0);function r(e,t){var n=document.getElementById("simpay-test-mode-toggle-notice");if(n)if(e!==t){var a=document.getElementById("simpay-toggle-notice-status"),r=document.getElementById("simpay-toggle-notice-status-link");n.style.display="block",a&&r&&(a.innerHTML="<strong>"+a.dataset[e]+"</strong>",r.href=r.dataset[e])}else n.style.display="none"}function i(){var t=document.querySelectorAll(".simpay-disconnect-link");if(t){var n=simpayAdmin.i18n,a=n.disconnectConfirm,r=n.disconnectCancel;t.forEach((function(t){t.addEventListener("click",(function(n){n.preventDefault(),e(".simpay-disconnect-confirm").dialog({resizable:!1,height:"auto",width:400,modal:!0,draggable:!1,open:function(){e(".ui-dialog-buttonset .ui-button").removeClass("ui-button").last().css({marginLeft:"10px"}).focus()},buttons:[{text:r,click:function(){e(this).dialog("close")},class:"button button-secondary"},{text:a,click:function(){window.location.href=t.href},class:"button button-primary"}]})}))}))}}Object(a.a)((function(){var e;(e=document.getElementById("simpay-stripe-account-info"))&&wp.ajax.send("simpay_stripe_connect_account_information",{data:{nonce:e.dataset.nonce},success:function(t){e.querySelector("p").innerHTML=t.message,e.style.display="block","simpay-stripe-activated-account-actions"===t.actions?e.classList.add("notice-info"):e.classList.add("notice-warning");var n=document.getElementById(t.actions);n&&(n.style.display="block"),i()},error:function(t){e.querySelector("p").innerHTML=t.message,e.style.display="block",e.classList.add("notice-error");var n=document.getElementById(t.actions);n&&(n.style.display="block",i())}})}))}).call(this,n(2))},function(e,t,n){"use strict";n.r(t),function(e){var t=n(5),a=n.n(t),r=n(7),i=(n(22),n(23),n(24),n(16));n(25),n(26),n(47),n(35),n(36),window.wpsp=window.wpsp||{hooks:r.a};var o,c,s,l=simpayAdmin,u=l.licenseLevel,d=l.i18n.trashFormConfirm,p={};p={init:function(){c=o(document.body),s=c.find("#simpay-form-settings"),this.handleMetaboxTabClick(),window.postboxes&&window.postboxes.handle_click&&s.on("click",".postbox .simpay-hndle, .postbox .simpay-handlediv",window.postboxes.handle_click),r.a.addAction("settings.toggleTestMode","wpsp/settings/stripe-connect",i.a),this.handleFormBuilderSettingToggles(),r.a.addAction("customFieldAdded","wpsp/payment-form",this.handleFormBuilderSettingToggles),o(document).on("click.simpayTabLink",".simpay-tab-link",(function(e){e.preventDefault(),p.handleInternalLinkToTabClicks(o(this))})),o(document).on("click.simpayImagePreview",".simpay-remove-image-preview",(function(e){p.handleRemoveImagePreviewClick(e)})),this.setupChosen(),this.addMediaFields(),this.stripeConnect(),this.initSortableFields(s.find(".simpay-custom-fields")),s.find(".add-field").on("click.simpayAddField",this.addField),s.find(".simpay-custom-fields").on("click",".simpay-remove-field-link",this.removeField);var e=o(".simpay-payment-modes");e.length&&e.find("input").each((function(){var t=o(this);e.hasClass("simpay-payment-mode--"+t.val())||t.attr("disabled",!0)})),this.bindTrashWarning(),c.trigger("simpayAdminInit"),o(".show-settings").detach().prependTo(".simpay-branding-bar__actions").removeClass().addClass("simpay-branding-bar__actions-button").html('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 0 1 0 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 0 1 0-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"/><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/></svg>').on("click",window.screenMeta.toggleEvent),this.onDedicatedPaymentPageToggle()},handleFormBuilderSettingToggles:function(){["_amount_type","_success_redirect_type","_subscription_type","_subscription_custom_amount","_form_type","_tax_status","_enable_payment_page","_inventory","_inventory_behavior","_schedule_start","_schedule_end",".simpay-total-amount-label-recurring",".simpay-total-amount-label-tax",".simpay-shipping-address",".simpay-text-multiline",".simpay-dropdown-type",".simpay-radio-type",".simpay-price-enable-custom",".simpay-price-type input",".simpay-email-link-enabled",".simpay-phone-smart-enabled"].forEach((function(e){var t=o(e),n=!1;"."!==e.substring(0,1)?t='[name="'.concat(e,'"]'):(t=e,n=!0),o("#simpay-form-settings").on("change",t,(function(){var t=o("#simpay-form-settings");!0===n&&(t=o(this).closest(".simpay-field-data"));var a=o(this).val();o(this).is(":checkbox")&&(a=o(this).is(":checked")?"yes":"no"),t.find(o('.simpay-show-if[data-if="'.concat(e,'"]'))).each((function(){var e=o(this),t=e.data("is");e.hide(),t.includes(a)&&e.show().css("display","block")}))})),o(t).filter(":checkbox").trigger("change"),o(t).filter(":checked").trigger("change"),o(t).is("select")&&o(t).trigger("change")}))},handleRemoveImagePreviewClick:function(e){e.preventDefault(),o(e.target).parents("td").find(".simpay-image-preview-wrap").val("").hide(),o(e.target).parents("td").find(".simpay-field-image-url").val(""),o(e.target).parents("td").find(".simpay-remove-image-preview").hide()},addMediaFields:function(){o(".simpay-media-uploader").on("click",(function(e){e.preventDefault();var t=wp.media.frames.file_frame=wp.media({title:simpayAdmin.i18n.mediaTitle,button:{text:simpayAdmin.i18n.mediaButtonText},multiple:!1}),n=o(this);t.on("select",(function(){var e=t.state().get("selection").first().toJSON(),a=n.parents("td").find(".simpay-field-image-url"),r="id"===a.data("fvalue")?e.id:e.url;n.parents("td").find(".simpay-image-preview-wrap").show(),n.parents("td").find(".simpay-remove-image-preview").show(),n.parents("td").find(".simpay-image-preview").prop("src",r),a.val(r)})),t.open()}))},setupChosen:function(){var e=o(".simpay-chosen-select, .simpay-chosen-search");e.chosen({disable_search_threshold:20}),e.chosen()},handleMetaboxTabClick:function(){var e=o('ul.simpay-tabs li:not([data-available="no"]) a'),t=o("div.simpay-panel"),n=e.parents("li");e.on("click",(function(e){e.preventDefault();var a=o(this).parent(),r=o(o(this).attr("href")),i=o(this).attr("href");history.pushState(null,null,i),setTimeout((function(){window.scrollTo(0,0)}),1),o('[name="simpay_form_settings_tab"]').val(i),o(".simpay-panels > .spinner").hide(),n.removeClass("active"),a.addClass("active"),t.addClass("simpay-panel-hidden"),r.removeClass("simpay-panel-hidden")}));var a="#form-display-options-settings-panel";location.hash.length&&(a=location.hash);var r=o('ul.simpay-tabs a[href="'+a+'"]');o('[name="simpay_form_settings_tab"]').val(a),r.length&&r.click()},stripeConnect:function(){var e="tr:nth-child(2), tr:nth-child(3), tr:nth-child(4), tr:nth-child(5)";o(".simpay-settings.stripe-account .form-table").find(e).hide(),o("#wpsp-api-keys-row-reveal button").on("click",(function(t){t.preventDefault(),o(".simpay-settings.stripe-account .form-table").find(e).show(),o("#wpsp-api-keys-row-hide").show(),o(this).parent().hide(),o(".wpsp-manual-key-warning").show()})),o("#wpsp-api-keys-row-hide button").on("click",(function(t){t.preventDefault(),o(".simpay-settings.stripe-account .form-table").find(e).hide(),o("#wpsp-api-keys-row-reveal").show(),o(this).parent().hide(),o(".wpsp-manual-key-warning").hide()}))},handleInternalLinkToTabClicks:function(e){var t=e.data("show-tab");c.find("."+t+"-tab a").click()},bindTrashWarning:function(){["plus","professional","elite","ultimate"].includes(u)&&(o(".post-type-simple-pay .submitdelete").click((function(e){confirm(d)||e.preventDefault()})),o(".post-type-simple-pay #posts-filter").submit((function(e){"trash"===o(this).find('select[name="action"]').val()&&(confirm(d)||e.preventDefault())})))},initSortableFields:function(e){e.sortable({items:".simpay-field-metabox:not(.simpay-custom-field-payment-button):not(.simpay-custom-field-checkout-button)",containment:"#simpay-form-settings",handle:".simpay-hndle",placeholder:"sortable-placeholder",cursor:"move",delay:o(document.body).hasClass("mobile")?200:0,distance:2,tolerance:"pointer",forcePlaceholderSize:!0,opacity:.65,stop:function(e,t){p.orderFields()},helper:function(e,t){return t.clone().find(":input").attr("name",(function(e,t){return"sort_"+parseInt(1e5*Math.random(),10).toString()+"_"+t})).end()}})},addField:function(e){var t=s.find(".simpay-custom-fields .simpay-field-metabox").length,n=o("#simpay-custom-fields-wrap").find(".simpay-metaboxes"),i=s.find("#custom-field-select"),c=i.val(),l=a()(document.querySelectorAll(".field-uid")).map((function(e){return parseInt(e.value)})),u={action:"simpay_add_field",post_id:o("#post_ID").val(),fieldType:c,counter:parseInt(t)+1,nextUid:parseInt(_.max(l))+1,addFieldNonce:s.find("#simpay_custom_fields_nonce").val()};e.preventDefault(),s.find(".postbox").each((function(){o(this).is(":visible")&&o(this).addClass("closed")})),o.ajax({url:ajaxurl,method:"POST",data:u,success:function(e){var t=o("<div/>").append(e);["payment_button","checkout_button"].includes(c)?n.append(t.html()):n.prepend(t.html()),i.prop("selectedIndex",0),p.orderFields(),r.a.doAction("customFieldAdded",e)},error:function(e){window.spShared.debugLog(e)}})},removeField:function(e){if(e.preventDefault(),s.find("#custom-field-select"),window.confirm("Are you sure you want to remove this field?")){var t=o(this).closest(".simpay-field-metabox");t.data("type"),t.remove(),r.a.doAction("customFieldRemoved")}},orderFields:function(){o(".simpay-custom-fields .simpay-field-metabox").each((function(e,t){var n=parseInt(o(t).index(".simpay-custom-fields .simpay-field-metabox"));o(".field-order",t).val(n+1)}))},onDedicatedPaymentPageToggle:function(){var e=document.getElementById("_enable_payment_page"),t=document.getElementById("simpay-payment-url-shortcode-section");if(e&&t){var n=function(){e.checked?t.style.display="block":t.style.display="none"};n(),e.addEventListener("change",n)}}},(o=e)(document).ready((function(e){p.init()}))}.call(this,n(2))},function(e,t,n){var a=n(12);e.exports=function(e){if(Array.isArray(e))return a(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var a=n(12);e.exports=function(e,t){if(e){if("string"==typeof e)return a(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){"use strict";var a=n(5),r=n.n(a),i=n(0),o=simpayAdminSettingToggles||[];function c(e){var t=e.id,n=document.querySelector(".simpay-settings-".concat(t));if(!n)return{};var a=n.querySelectorAll('input[name="simpay_settings['.concat(t,']"]'));0===a.length&&(a=n.querySelectorAll('select[name="'.concat(t,'"]')));var i=a[0].value;if(["radio","checkbox"].includes(a[0].type)){var o=r()(a).filter((function(e){return e.checked}));i=0===o.length?"no":o[0].value}return{setting:a,currentValue:i}}function s(e){var t=e.id,n=e.value,a=e.toggles,r=e.compare;if("none"!==document.querySelector(".simpay-settings-".concat(t)).style.display){var i=c(e).currentValue;a.map((function(e){return document.querySelector(".simpay-settings-".concat(e))})).forEach((function(e){e&&(e.style.display="IS NOT"===r?i===n?"none":"table-row":i===n?"table-row":"none")})),a.forEach((function(e){var t=_.find(o,{id:e});t&&s(t)}))}}Object(i.a)((function(){o.forEach((function(e){s(e),c(e).setting.forEach((function(t){t.addEventListener("change",(function(){s(e)}))}))}))}))},function(e,t,n){"use strict";var a=n(0);Object(a.a)((function(){var e=window.wpsp.hooks,t=document.querySelectorAll('[name="simpay_settings[test_mode]"]');if(0!==t.length){var n="enabled"===document.querySelector('[name="simpay_settings[test_mode]"]:checked').value?"test":"live";e.doAction("settings.toggleTestMode",n,n),_.each(t,(function(t){return t.addEventListener("change",(function(t){var a="enabled"===t.target.value?"test":"live";e.doAction("settings.toggleTestMode",a,n)}))}))}}))},function(e,t,n){"use strict";var a=n(0);function r(e){var t=document.getElementById("simpay-connect-license-feedback"),n=document.getElementById("simpay-connect-license-submit");e.message?(t.innerText=e.message,t.classList.remove("simpay-license-message--valid"),t.classList.add("simpay-license-message--invalid"),t.style.display="block"):t.style.display="none",e.reload?setTimeout((function(){window.location.reload()}),2e3):(n.disabled=!1,n.innerText=n.dataset.connect)}function i(e){var t=document.getElementById("simpay-connect-license-feedback");e.message?(t.innerText=e.message,t.classList.remove("simpay-license-message--invalid"),t.classList.add("simpay-license-message--valid"),t.style.display="block"):t.style.display="none",e.reload?setTimeout((function(){window.location.reload()}),2e3):window.location=e.url}function o(){var e=document.getElementById("simpay-connect-license-key"),t=document.getElementById("simpay-connect-license-nonce"),n=document.getElementById("simpay-connect-license-submit");n.disabled=!0,n.innerText=n.dataset.connecting,wp.ajax.send("simpay_get_connect_url",{data:{nonce:t.value,key:e.value},success:i,error:r})}Object(a.a)((function(){var e=document.getElementById("simpay-connect-license-key");if(e){var t=document.getElementById("simpay-connect-license-submit");e.addEventListener("keypress",(function(e){"Enter"===e.key&&(e.preventDefault(),o())})),t.addEventListener("click",(function(e){e.preventDefault(),t.disabled=!0,o()}))}}))},function(e,t,n){"use strict";var a=n(0),r=[".simpay-settings-hcaptcha_setup",".simpay-settings-hcaptcha_site_key",".simpay-settings-hcaptcha_secret_key",".simpay-settings-recaptcha_setup",".simpay-settings-recaptcha_site_key",".simpay-settings-recaptcha_secret_key",".simpay-settings-recaptcha_score_threshold",".simpay-settings-cloudflare_turnstile_setup",".simpay-settings-cloudflare_turnstile_site_key",".simpay-settings-cloudflare_turnstile_secret_key",".simpay-settings-no_captcha_warning"];function i(e){var t,n=e.target.value;switch(n){case"none":t="no_captcha";break;case"recaptcha-v3":t="recaptcha";break;case"cloudflare-turnstile":t="cloudflare_turnstile";break;default:t=n}r.forEach((function(e){var n=document.querySelector(e);n&&(n.style.display=e.includes(t)?"table-row":"none")}))}Object(a.a)((function(){var e=document.querySelectorAll('input[name="simpay_settings[captcha_type]"]');if(0!==e.length){r.forEach((function(e){var t=document.querySelector(e);t&&(t.style.display="none")})),e.forEach((function(e){return e.addEventListener("change",i)}));var t=document.querySelector('input[name="simpay_settings[captcha_type]"]:checked');t&&t.dispatchEvent(new Event("change")),function(){var e=document.querySelector(".simpay-recaptcha-feedback");if(e){var t=simpayGoogleRecaptcha,n=t.siteKey,a=t.i18n;""!==n&&grecaptcha.ready((function(){var e=document.querySelector(".grecaptcha-badge");e&&(e.style.display="none");try{grecaptcha.execute(n,{action:"simple_pay_admin_test"}).then((function(e){wp.ajax.send("simpay_validate_recaptcha_source",{data:{token:e,recaptcha_action:"simple_pay_admin_test"},error:r})})).catch(r)}catch(e){r()}}))}function r(){e.style.display="block",e.classList.add("notice-error"),e.innerHTML="";var t=document.createElement("p");t.innerText=a.invalid,e.appendChild(t)}}()}}))},function(e,t,n){"use strict";var a=n(0),r=n(1);Object(a.a)((function(){var e=document.querySelector(".simpay-settings-emails-configure");e&&(document.querySelector(".simpay-settings-subsection-delivery").after(e),function(e){var t=e.querySelector("select");t&&t.addEventListener("change",(function(e){var n=e.target,a=n.options[n.selectedIndex].dataset,i=a.available,o=a.upgradeTitle,c=a.upgradeDescription,s=a.upgradeUrl,l=a.upgradePurchasedUrl;"no"===i&&(Object(r.upgradeModal)({title:o,description:c,url:s,purchasedUrl:l}),t.value="",t.selectedIndex=0)}))}(e))}))},function(e,t,n){var a=n(10).default;function r(){"use strict";e.exports=r=function(){return n},e.exports.__esModule=!0,e.exports.default=e.exports;var t,n={},i=Object.prototype,o=i.hasOwnProperty,c=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},l=s.iterator||"@@iterator",u=s.asyncIterator||"@@asyncIterator",d=s.toStringTag||"@@toStringTag";function p(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{p({},"")}catch(t){p=function(e,t,n){return e[t]=n}}function m(e,t,n,a){var r=t&&t.prototype instanceof b?t:b,i=Object.create(r.prototype),o=new j(a||[]);return c(i,"_invoke",{value:q(e,n,o)}),i}function y(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=m;var f="suspendedStart",h="executing",v="completed",g={};function b(){}function _(){}function k(){}var E={};p(E,l,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(M([])));x&&x!==i&&o.call(x,l)&&(E=x);var S=k.prototype=b.prototype=Object.create(E);function L(e){["next","throw","return"].forEach((function(t){p(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function n(r,i,c,s){var l=y(e[r],e,i);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==a(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,c,s)}),(function(e){n("throw",e,c,s)})):t.resolve(d).then((function(e){u.value=e,c(u)}),(function(e){return n("throw",e,c,s)}))}s(l.arg)}var r;c(this,"_invoke",{value:function(e,a){function i(){return new t((function(t,r){n(e,a,t,r)}))}return r=r?r.then(i,i):i()}})}function q(e,n,a){var r=f;return function(i,o){if(r===h)throw Error("Generator is already running");if(r===v){if("throw"===i)throw o;return{value:t,done:!0}}for(a.method=i,a.arg=o;;){var c=a.delegate;if(c){var s=I(c,a);if(s){if(s===g)continue;return s}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(r===f)throw r=v,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r=h;var l=y(e,n,a);if("normal"===l.type){if(r=a.done?v:"suspendedYield",l.arg===g)continue;return{value:l.arg,done:a.done}}"throw"===l.type&&(r=v,a.method="throw",a.arg=l.arg)}}}function I(e,n){var a=n.method,r=e.iterator[a];if(r===t)return n.delegate=null,"throw"===a&&e.iterator.return&&(n.method="return",n.arg=t,I(e,n),"throw"===n.method)||"return"!==a&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+a+"' method")),g;var i=y(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function B(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(B,this),this.reset(!0)}function M(e){if(e||""===e){var n=e[l];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function n(){for(;++r<e.length;)if(o.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(a(e)+" is not iterable")}return _.prototype=k,c(S,"constructor",{value:k,configurable:!0}),c(k,"constructor",{value:_,configurable:!0}),_.displayName=p(k,d,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,k):(e.__proto__=k,p(e,d,"GeneratorFunction")),e.prototype=Object.create(S),e},n.awrap=function(e){return{__await:e}},L(A.prototype),p(A.prototype,u,(function(){return this})),n.AsyncIterator=A,n.async=function(e,t,a,r,i){void 0===i&&(i=Promise);var o=new A(m(e,t,a,r),i);return n.isGeneratorFunction(t)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},L(S),p(S,d,"Generator"),p(S,l,(function(){return this})),p(S,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function e(){for(;n.length;){var a=n.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},n.values=M,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(a,r){return c.type="throw",c.arg=e,n.next=a,r&&(n.method="next",n.arg=t),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),l=o.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&o.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var r=a;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var i=r?r.completion:{};return i.type=e,i.arg=t,r?(this.method="next",this.next=r.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;O(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(e,n,a){return this.delegate={iterator:M(e),resultName:n,nextLoc:a},"next"===this.method&&(this.arg=t),g}},n}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var a=n(10).default,r=n(29);e.exports=function(e){var t=r(e,"string");return"symbol"==a(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var a=n(10).default;e.exports=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){"use strict";(function(e){var t=n(6),a=n.n(t),r=n(0),i=n(1);Object(r.a)((function(){var t,n,r,o,c=document.querySelector(".post-type-simple-pay #post");if(c){var s=a()(c,{hash:!0});delete s.simpay_form_settings_tab,function(t){function n(e){var n=a()(document.querySelector(".post-type-simple-pay form#post"),{hash:!0});if(delete n.simpay_form_settings_tab,delete n.simpay_save_preview,JSON.stringify(n)!==t)return e.preventDefault(),simpayAdmin.i18n.leavePageConfirm}window.addEventListener("beforeunload",n),window.onbeforeunload=n,e(".post-type-simple-pay form#post").off("submit").on("submit",(function(){window.removeEventListener("beforeunload",n),window.onbeforeunload=null}))}(JSON.stringify(s)),r=document.getElementById("form-type-select"),o=document.getElementById("is-overlay"),r.addEventListener("change",(function(e){var t=e.target,n=t.options[t.selectedIndex],a=n.value;"on-site"===a&&Object(i.maybeBlockSelectWithUpgradeModal)(e),"off-site"===a&&(o.querySelector("input").checked=!1),o.style.display="yes"===n.dataset.available&&"on-site"===a?"block":"none"})),(n=document.getElementById("_recaptcha"))&&n.addEventListener("change",(function(e){e.preventDefault(),e.target.checked=!e.target.checked,window.open(e.target.dataset.settingsUrl,"_blank")})),function(){var e=document.getElementById("_email_verification");e&&e.addEventListener("change",(function(e){e.preventDefault(),e.target.checked=!e.target.checked,window.open(e.target.dataset.settingsUrl,"_blank")}))}(),(t=document.querySelector("#_company_name"))&&(t.addEventListener("blur",(function(){0===t.value.length?(t.nextElementSibling.classList.remove("hidden"),t.value=simpayAdmin.siteTitle):t.nextElementSibling.classList.add("hidden")})),t.addEventListener("focus",(function(){0!==t.value.length&&t.nextElementSibling.classList.add("hidden")})))}}))}).call(this,n(2))},function(e,t,n){"use strict";(function(e,t){var a=n(5),r=n.n(a),i=n(0),o=n(7),c=n(1),s=n(9);function l(){var e=document.querySelector(".simpay-custom-field-plan-select"),t=document.getElementById("simpay-prices");if(e&&t){var n=t.querySelectorAll(".simpay-price").length,a=document.querySelector("#_allow_purchasing_multiple_line_items");if(a&&a.checked){var i=document.querySelectorAll('input.simpay-price-enable-optional-subscription[type="checkbox"]'),o=document.querySelectorAll('.simpay-quantity-toggle input.simpay-price-quantity[type="checkbox"]'),c=document.querySelectorAll(".simpay-price-enable-custom-amount");[].concat(r()(i),r()(o),r()(c)).some((function(e){return e.checked}))?e.style.display="block":e.style.display=n>1?"block":"none"}else e.style.display=n>1?"block":"none"}}function u(){var e=document.getElementById("simpay-prices");if(e){var t=e.querySelectorAll(".simpay-price").length;document.querySelectorAll(".simpay-price-label-default").forEach((function(e){return e.style.display=t>1?"none":"block"})),document.querySelectorAll(".simpay-price-label-display").forEach((function(e){return e.style.display=t>1?"block":"none"})),document.querySelectorAll(".simpay-price-option-label").forEach((function(e){if(t>1)e.style.display="block";else{var n=e.querySelector("input");n&&""!==n.value.trim()?e.style.display="block":e.style.display="none"}})),document.querySelectorAll(".simpay-price-default-check").forEach((function(e){return e.style.display=t>1?"block":"none"})),l()}}function d(e){var t,n=e.querySelector(".simpay-price-label-display"),a=e.querySelector(".simpay-price-label"),r=simpayAdmin,i=r.currencyPosition,c=r.i18n,s=c.recurringIntervals,l=c.recurringIntervalDisplay,u=c.customAmountLabel;if(""!==a.value)t=a.value;else{var d=e.querySelector(".simpay-price-currency"),p=e.querySelector(".simpay-price-amount"),m=e.querySelector(".simpay-price-amount-type"),y=e.querySelector(".simpay-price-custom-amount input"),f=e.querySelector(".simpay-price-enable-custom-amount"),h=d.options[d.selectedIndex].dataset.symbol;switch(t=!0===f.checked?y.value:p.value,i){case"left":t="".concat(h).concat(t);break;case"left_space":t="".concat(h," ").concat(t);break;case"right":t="".concat(t).concat(h);break;case"right_space":t="".concat(t," ").concat(h)}if(!0===f.checked&&(t=u.replace("%s",t)),"recurring"===m.value){var v=e.querySelector(".simpay-price-recurring-interval"),g=e.querySelector(".simpay-price-recurring-interval-count");if(!v||!g)return;var b=s[v.options[v.selectedIndex].value];t=l.replace("%1$s",t).replace("%2$s",g.value).replace("%3$s","1"===g.value?b[0]:b[1])}}n.innerHTML=t,Object(o.b)("simpayFormBuilderPriceOptionLabelUpdated",t,e)}function p(e,t){var n=t.dataset.amountType,a=e.querySelector(".simpay-price-can-recur-label"),r=e.querySelector(".simpay-price-enable-optional-subscription"),i=e.querySelector(".simpay-false-recurring-checkbox");if("recurring"===n){var o=simpayAdmin.i18n.priceRecurring;r.checked&&(o=simpayAdmin.i18n.priceOptionalRecurring),a.innerHTML=o,r.style.display="none",i.style.display="",r.checked=!1}else a.innerHTML=simpayAdmin.i18n.priceOptionalRecurring,r.style.display="",i.style.display="none"}function m(e){var t=e.querySelector(".simpay-price-recurring-interval"),n=e.querySelector(".simpay-price-recurring-interval-count");if(t&&n){var a=parseInt(n.value);switch(t.options[t.selectedIndex].value){case"day":a>365&&(n.value=365);break;case"week":a>52&&(n.value=52);break;case"month":a>12&&(n.value=12);break;case"year":a>1&&(n.value=1)}var i=JSON.parse(t.dataset.intervals);r()(t.options).forEach((function(e,a){var r=e.value;t.options[a].text=1===parseInt(n.value)?i[r][0]:i[r][1]}))}}function y(){document.querySelectorAll(".simpay-price").forEach((function(e){e.querySelector(".simpay-price-label").addEventListener("keyup",(function(){return d(e)})),d(e),e.querySelector(".simpay-price-currency").addEventListener("change",(function(){!function(e){var t=e.querySelector(".simpay-price-currency"),n=t.options[t.selectedIndex].dataset.symbol;e.querySelectorAll(".simpay-price-currency-symbol").forEach((function(e){return e.innerText=n}))}(e),d(e)}));var n=e.querySelectorAll(".simpay-price-amount-type .button");n.length>0&&n.forEach((function(t){t.classList.contains("button-primary")&&p(e,t),t.addEventListener("click",(function(t){t.preventDefault();var n=t.target.dataset,a=n.available,r=n.upgradeTitle,i=n.upgradeDescription,o=n.upgradeUrl,l=n.upgradePurchasedUrl;"no"===a?Object(c.upgradeModal)({title:r,description:i,url:o,purchasedUrl:l}):(function(e,t){e.querySelectorAll(".simpay-price-amount-type .button").forEach((function(e){return e.classList.remove("button-primary")}));var n=t.dataset.amountType;t.classList.add("button-primary"),p(e,t),Object(s.c)(e),e.querySelector(".simpay-price-amount-type").value=n}(e,t.target),d(e))}))})),e.querySelector(".simpay-price-amount").addEventListener("keyup",(function(){return d(e)}));var a=e.querySelector(".simpay-price-enable-optional-subscription");a&&a.addEventListener("click",(function(t){var n=t.target,a=n.dataset,r=a.available,i=a.upgradeTitle,o=a.upgradeDescription,u=a.upgradeUrl,p=a.upgradePurchasedUrl;"no"===r?(n.checked=!1,t.preventDefault(),Object(c.upgradeModal)({title:i,description:o,url:u,purchasedUrl:p})):(d(e),l(),Object(s.c)(e))})),e.querySelector(".simpay-price-enable-custom-amount").addEventListener("change",(function(){d(e),l()}));var r=e.querySelector(".simpay-price-recurring-interval"),i=e.querySelector(".simpay-price-recurring-interval-count");r&&i&&(r.addEventListener("change",(function(){d(e),m(e)})),m(e),i.addEventListener("keyup",(function(){m(e),d(e)})),i.addEventListener("change",(function(){m(e),d(e)})));var y=e.querySelector(".simpay-price-legacy-setting-toggle");y&&y.addEventListener("click",(function(t){t.preventDefault(),function(e){e.querySelectorAll(".simpay-price-legacy-setting").forEach((function(e){return e.style.display="block"===e.style.display?"none":"block"}))}(e)}));var h=e.querySelector(".simpay-price-default");h&&h.addEventListener("change",(function(){return function(e){document.querySelectorAll(".simpay-price-default").forEach((function(e){return e.checked=!1})),e.querySelector(".simpay-price-default").checked=!0}(e)}));var v=e.querySelector(".simpay-price-remove");v&&v.addEventListener("click",(function(t){t.preventDefault(),function(e){e.remove(),f(),u(),Object(o.b)("simpayFormBuilderPriceRemoved",e.id)}(e)})),e.querySelectorAll(".simpay-price-configure-btn").forEach((function(e){var n=e.classList.contains("simpay-price-locked");e.addEventListener("click",(function(a){if(a.preventDefault(),!n){var r,i,o=e.getAttribute("data-target-id");r=e.getAttribute("data-dialog-title"),(i=t("#".concat(o))).dialog({title:r,position:{my:"center",at:"center",of:window},modal:!0,width:500,resizable:!1,draggable:!1,appendTo:i.parent().parent(),open:function(e){var n=this;t(e.target).find(".update, .simpay-tab-link").on("click",(function(e){e.preventDefault(),t(n).dialog("close")}))},create:function(){t(".ui-dialog-titlebar-close").addClass("ui-button")}}),t("#".concat(o)).dialog("open")}}))}));var g=e.querySelector('.simpay-quantity-toggle input.simpay-price-quantity[type="checkbox"]');g&&g.addEventListener("change",(function(){l()}))})),u(),l()}function f(){var e=document.querySelectorAll(".simpay-price");document.querySelector(".simpay-price-default:checked")||(e[0].querySelector(".simpay-price-default").checked=!0)}Object(i.a)((function(){var t,n,a,r,i,l,d;e(".simpay-prices").sortable({items:".simpay-field-metabox",containment:"#simpay-prices",handle:".simpay-hndle",placeholder:"sortable-placeholder",cursor:"move",delay:e(document.body).hasClass("mobile")?200:0,distance:2,tolerance:"pointer",forcePlaceholderSize:!0,opacity:.65,helper:function(e,t){return t.clone().find(":input").attr("name",(function(e,t){return"sort_"+parseInt(1e5*Math.random(),10).toString()+"_"+t})).end()}}),y(),t=document.getElementById("simpay-prices-advanced-toggle"),n=document.getElementById("simpay-prices-advanced"),t&&n&&t.addEventListener("click",(function(e){e.preventDefault(),n.style.display="block"===n.style.display?"none":"block"})),(d=document.getElementById("simpay-prices-advanced-add"))&&d.addEventListener("click",(function(t){var n,a,r,i,o,c;t.preventDefault(),r=(a=(n=d).dataset).nonce,i=a.formId,o=document.getElementById("simpay-prices"),c=document.getElementById("simpay-prices-advanced-plan-id"),n.classList.add("disabled"),wp.ajax.send("simpay_add_plan",{data:{_wpnonce:r,form_id:i,plan_id:c.value},success:function(t){e(o).append(t),y(),document.getElementById("simpay-prices-advanced").style.display="none",c.value="",n.classList.remove("disabled"),u()},error:function(e){var t=e.message;window.alert(t),n.classList.remove("disabled")}})})),function(){var t=document.getElementById("simpay-add-price");t&&t.addEventListener("click",(function(n){var a,r,i,c,l;n.preventDefault(),i=(r=(a=t).dataset).nonce,c=r.formId,l=document.getElementById("simpay-prices"),a.classList.add("disabled"),wp.ajax.send("simpay_add_price",{data:{_wpnonce:i,form_id:c},success:function(t){e(l).append(t),y(),f(),a.classList.remove("disabled"),u(),Object(s.a)(),Object(o.b)("simpayFormBuilderPriceAdded",t)},error:function(e){var t=e.message;window.alert(t),a.classList.remove("disabled")}})}))}(),(a=document.getElementById("simpay-add-price-lite"))&&a.addEventListener("click",c.maybeBlockButtonWithUpgradeModal),(r=document.getElementById("simpay-amount-type-lite"))&&r.addEventListener("click",c.maybeBlockButtonWithUpgradeModal),(i=document.getElementById("simpay-can-recur-lite"))&&i.addEventListener("click",c.maybeBlockButtonWithUpgradeModal),(l=document.getElementById("simpay-custom-lite"))&&l.addEventListener("click",c.maybeBlockButtonWithUpgradeModal)}))}).call(this,n(2),n(2))},function(e,t,n){"use strict";(function(e){var t=n(0),a=n(1);Object(t.a)((function(){var t;document.querySelector(".post-type-simple-pay #post")&&(t=e("#simpay-form-settings").find("#lite-add-field"))&&t.on("click.simpayAddField",(function(e){var t=e,n=document.querySelectorAll(".simpay-custom-fields > div").length;t.target.dataset.available=n>=3?"no":"yes",Object(a.maybeBlockButtonWithUpgradeModal)(t)&&e.stopImmediatePropagation()}))}))}).call(this,n(2))},function(e,t,n){"use strict";(function(e){var t=n(0),a=n(1);Object(t.a)((function(){var t,n,r;(t=document.querySelector('[name="_enable_payment_page"]'))&&t.addEventListener("change",a.maybeBlockCheckboxWithUpgradeModal),(n=document.querySelector('[name="_payment_page_powered_by"]'))&&n.addEventListener("change",a.maybeBlockCheckboxWithUpgradeModal),function(){if(document.getElementById("payment-page-background-color-custom")){e("#payment-page-background-color-custom").wpColorPicker();var t=document.querySelector(".simpay-payment-page-background-color .wp-color-result"),n=document.querySelectorAll(".simpay-payment-page-background-color");t.addEventListener("click",(function(t){n.forEach((function(e){e.querySelector("input").checked=!1})),t.target.classList.add("is-selected"),e(t.target).parent().find("input").prop("checked",!0)})),n.forEach((function(e){e.querySelector("input").addEventListener("change",(function(){t.classList.remove("is-selected")}))}))}}(),(r=document.querySelector('[name="_payment_page_slug"]'))&&r.addEventListener("keyup",(function(e){var t=document.querySelector(".simpay-payment-page-url");t&&(t.dataset.clipboardText="".concat(window.location.origin,"/").concat(e.target.value))}))}))}).call(this,n(2))},function(e,t,n){"use strict";(function(e){var t=n(0);function a(){var e=document.getElementById("_confirmation_page_use_payment_page_config"),t=document.getElementById("simpay-dedicated-confimration-page-customization-options"),n=document.getElementById("_enable_payment_page"),a=document.getElementsByName("_success_redirect_type"),r=!1;a.forEach((function(e){"dedicated"===e.value&&e.checked&&(r=!0)})),setTimeout((function(){n.checked&&e.checked&&r?t.classList.add("simpay-panel-hidden"):t.classList.remove("simpay-panel-hidden")}),100)}Object(t.a)((function(){!function(){if(document.getElementById("confirmation-page-background-color-custom")){e("#confirmation-page-background-color-custom").wpColorPicker();var t=document.querySelector(".simpay-payment-page-background-color .wp-color-result"),n=document.querySelectorAll(".simpay-payment-page-background-color");t.addEventListener("click",(function(t){n.forEach((function(e){e.querySelector("input").checked=!1})),t.target.classList.add("is-selected"),e(t.target).parent().find("input").prop("checked",!0)})),n.forEach((function(e){e.querySelector("input").addEventListener("change",(function(){t.classList.remove("is-selected")}))}))}}(),function(){var e=document.getElementById("_enable_payment_page");if(e){var t=function(){var t=document.getElementById("_confirmation_page_use_payment_page_config_wrapper");if(t){var n=document.getElementById("simpay-dedicated-confimration-page-customization-options");e.checked?(t.style.display="",a()):setTimeout((function(){t.style.display="none",n.classList.remove("simpay-panel-hidden"),a()}),100)}};t(),e.addEventListener("change",t),document.getElementById("_confirmation_page_use_payment_page_config").addEventListener("change",(function(){a()})),a()}}()}))}).call(this,n(2))},function(e,t,n){"use strict";(function(e){var t=n(10),a=n.n(t),r=n(0),i='<i class="fa fa-toggle-on fa-flip-horizontal" aria-hidden="true"></i>',o='<i class="fa fa-toggle-on" aria-hidden="true"></i>',c=simpayAdmin,s=c.nonce,l=c.ajaxUrl,u=c.i18n,d=u.addonActivated,p=u.addonActivate,m=u.addonActive,y=u.addonDeactivate,f=u.addonInactive,h=u.addonInstall,v=u.addonError,g=u.pluginError;function b(t){t.preventDefault();var n,r,c,u,b,_,k=e(t.target);if(k.hasClass("status-go-to-url"))window.open(k.attr("data-plugin"),"_blank");else{var E=k.attr("data-type");if(k.prop("disabled",!0).addClass("loading"),k.html('<i class="fa fa-spinner fa-spin" aria-hidden="true"></i>'),k.hasClass("status-active"))n="deactivate",r="status-installed","plugin"===E&&(r+=" button button-secondary"),c=f,u=p,b=y,"addon"===E&&(u=i+u,b=o+b);else if(k.hasClass("status-installed"))n="activate",r="status-active","plugin"===E&&(r+=" button button-secondary disabled"),c=m,u=y,"addon"===E?(u=o+u,b=i+p):"plugin"===E&&(u=d,b=p);else{if(!k.hasClass("status-missing"))return;n="install",r="status-active","plugin"===E&&(r+=" button disabled"),c=m,u=d,b='<i class="fa fa-cloud-download" aria-hidden="true"></i>',"addon"===E&&(u=i+y,b+=h)}var w=k.closest(".simpay-addon");!function(t,n,a,r){var i={activate:"simpay_activate_addon",install:"simpay_install_addon",deactivate:"simpay_deactivate_addon"}[n];if(i){var o={action:i,nonce:s,plugin:t,type:a};e.post(l,o,r).fail((function(e){console.log(e.responseText)}))}}(k.attr("data-plugin"),n,E,(function(e){e.success?("install"===n?(k.attr("data-plugin",e.data.basename),_=e.data.msg,e.data.is_activated||(c=f,u="plugin"===E?p:i+p,r="plugin"===E?"status-installed button button-secondary":"status-installed")):_=e.data,w.find(".simpay-addon__actions").append('<div class="msg success">'+_+"</div>"),w.find("span.status-label").removeClass("status-active status-installed status-missing").addClass(r).removeClass("button button-primary button-secondary disabled").text(c),k.removeClass("status-active status-installed status-missing").removeClass("button button-primary button-secondary disabled").addClass(r).html(u)):("object"===a()(e.data)?"addon"===E?w.find(".simpay-addon__actions").append('<div class="msg error">'+v+"</div>"):w.find(".simpay-addon__actions").append('<div class="msg error">'+g+"</div>"):w.find(".simpay-addon__actions").append('<div class="msg error">'+e.data+"</div>"),"install"===n&&"plugin"===E&&k.addClass("status-go-to-url").removeClass("status-missing"),k.html(b)),k.prop("disabled",!1).removeClass("loading"),setTimeout((function(){w.find(".msg").remove()}),3e3)}))}}Object(r.a)((function(){document.querySelector(".simpay-addons")&&document.querySelectorAll(".simpay-addon").forEach((function(e){e.querySelector("button").addEventListener("click",b)}))}))}).call(this,n(2))},function(e,t,n){"use strict";var a=n(0);Object(a.a)((function(){var e=new ClipboardJS(".simpay-copy-button");e.on("success",(function(t){var n=t.trigger,a=n.dataset.copied,r=n.innerHTML;clearTimeout(i),n.innerHTML=a,n.classList.contains("button-secondary")&&(n.style.color="green",n.style.borderColor="green"),t.clearSelection();var i=setTimeout((function(){n.innerHTML=r,n.classList.contains("button-secondary")&&(n.style.color="",n.style.borderColor=""),e.clipboardAction.fakeElem&&e.clipboardAction.removeFake&&e.clipboardAction.removeFake()}),3e3);wp.a11y.speak(a)}))}))},,,,,,,,,,,function(e,t,n){"use strict";n(30),n(31);var a=n(5),r=n.n(a),i=n(0),o=n(1),c=n(9);function s(e){var t=e.target,n=t.options[t.selectedIndex].value,a=document.getElementById("_allow_purchasing_multiple_line_items"),i=document.querySelectorAll(".simpay-panel-field-payment-method[data-payment-method]");r()(i).forEach((function(e){var t="popular"===JSON.parse(e.dataset.paymentMethod).scope?"block":"none";e.style.display="all"===n?"block":t,Object(c.b)(a)}))}Object(i.a)((function(){var e=document.querySelectorAll(".simpay-panel-field-payment-method-filter");0!==e.length&&r()(e).forEach((function(e){e.addEventListener("change",s)}));var t=document.querySelectorAll(".simpay-payment-method-lite");t&&t.forEach((function(e){return e.addEventListener("change",o.maybeBlockCheckboxWithUpgradeModal)}));var n=document.querySelectorAll(".simpay-payment-method-fee-recovery-lite");n&&n.forEach((function(e){return e.addEventListener("click",o.maybeBlockButtonWithUpgradeModal)}))})),Object(i.a)((function(){var e=document.getElementById("_tax_status_lite");e&&e.addEventListener("change",o.maybeBlockSelectWithUpgradeModal)})),n(32),Object(i.a)((function(){var e,t;(e=document.getElementById("_enable_tax_id"))&&e.addEventListener("change",o.maybeBlockCheckboxWithUpgradeModal),(t=document.getElementById("_enable_promotion_codes"))&&t.addEventListener("change",o.maybeBlockCheckboxWithUpgradeModal)})),n(33),Object(i.a)((function(){var e=document.getElementById("_inventory");e&&e.addEventListener("change",o.maybeBlockCheckboxWithUpgradeModal);var t=document.getElementById("_inventory_behavior_individual");t&&t.addEventListener("change",o.maybeBlockCheckboxWithUpgradeModal);var n=document.getElementById("_schedule_start");n&&n.addEventListener("change",o.maybeBlockCheckboxWithUpgradeModal);var a=document.getElementById("_schedule_end");a&&a.addEventListener("change",o.maybeBlockCheckboxWithUpgradeModal)})),Object(i.a)((function(){var e=document.getElementById("automations-search");if(e){var t=document.querySelectorAll(".simpay-form-builder-automator__integrations-integration");e.addEventListener("input",(function(){var n=e.value.toLowerCase();t.forEach((function(e){for(var t=Object.values(e.dataset),a=0;a<t.length;a++){if(t[a].toLowerCase().includes(n))return void(e.style.display="block");e.style.display="none"}})),""===n&&t.forEach((function(e){"yes"===e.dataset.overflow&&(e.style.display="none")}))}))}})),Object(i.a)((function(){var e=document.querySelector("div[data-lite] li.simpay-notifications-tab");e&&e.addEventListener("click",o.maybeBlockButtonWithUpgradeModal)})),n(34)}]);